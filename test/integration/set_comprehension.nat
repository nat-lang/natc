let set;

// literal body.

set = {true | a in [1,2,3]};
assert(set == {true});

// variable body.

set = {a | a in [1,2,3]};
assert(set == {1,2,3});

// nested body.

set = {{true | b in a} | a in [[1,2], [3], [4,5]]};
assert(set == {{true}});

set = {{b | b in a} | a in [[1,2], [3], [4,5,5]]};
assert(set == {{1,2}, {3}, {4,5}});

set = {a | a in {{1,2}, {3}, {4,5}}};
assert({1,2} in set);

set = {{b | b in a} | a in {{1,2}, {3}, {4,5,5}}};
assert(set == {{1,2}, {3}, {4,5}});

set = {{true | b in a} | a in {{1,2}, {3}, {4,5}}};
assert(set == {{true}});

// nested condition.

set = {a | a in {a | a in [1,1,2,2,3,3]}};
assert(set == {1,2,3});

set = {a | a in {a | a in {1,1,2,2,3,3}}};
assert(set == {1,2,3});

