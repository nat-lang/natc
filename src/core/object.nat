class Unhashable < Exception {}

class Object < __obj__ {
  init() => {
    this.hash = nil;
    this.internal = ["hash", "internal"];
  }

  entries() => {
    this.internal;
    return [entry | entry in super.entries(), !(entry[0] in this.internal)];
  }

  __len__() => len(this.entries())

  __next__(idx) => next(this.entries(), idx)
  __curr__(idx) => curr(this.entries(), idx)

  setHash() => {
    this.hash = this.__hash__();
  }

  __hash__() => {
    throw Unhashable;
  }
}

